{
  "version": 3,
  "sources": ["../src/effect.ts", "../../shared/src/index.ts", "../src/baseHandler.ts", "../src/reactive.ts"],
  "sourcesContent": ["export function effect(fn, options?) {\r\n  //\u521B\u5EFA\u4E00\u4E2A\u54CD\u5E94\u5F0Feffect \u6570\u636E\u53D8\u5316\u540E\u53EF\u4EE5\u91CD\u65B0\u6267\u884C\r\n  const _effect = new ReactiveEffect(fn, () => {\r\n    _effect.run();\r\n  });\r\n\r\n  _effect.run();\r\n}\r\n\r\nexport let activeEffect;\r\n\r\nclass ReactiveEffect {\r\n  public active = true; //\u521B\u5EFA\u7684effect\u662F\u54CD\u5E94\u5F0F\u7684\r\n  constructor(public fn, public schedulder) {}\r\n\r\n  run() {\r\n    if (!this.active) {\r\n      return this.fn(); //\u4E0D\u662F\u6FC0\u6D3B\u7684\uFF0C\u6267\u884C\u540E\uFF0C\u4EC0\u4E48\u90FD\u4E0D\u505A\r\n    }\r\n    \r\n    activeEffect = this;\r\n    return this.fn; //\u4F9D\u8D56\u6536\u96C6\r\n  }\r\n}\r\n", "export function isObject(value) {\r\n  return typeof value === \"object\" && value !== null;\r\n}\r\n", "export enum ReactiveFlags {\r\n  IS_REACTIVE = \"__v_isReactive\",\r\n}\r\n\r\nexport const mutableHandlers: ProxyHandler<any> = {\r\n  get(target, key, receiver) {\r\n    if (key === ReactiveFlags.IS_REACTIVE) {\r\n      return true;\r\n    }\r\n    //\u53D6\u503C \u8BA9\u54CD\u5E94\u5F0F\u5C5E\u6027 \u548C effect \u6620\u5C04\u8D77\u6765\r\n    //\u4F9D\u8D56\u6536\u96C6\r\n    return Reflect.get(target, key, receiver);\r\n  },\r\n  set(target, key, value, receiver) {\r\n    //\u627E\u5230\u5C5E\u6027\uFF0C\u8BA9\u5BF9\u5E94\u7684effect\u91CD\u65B0\u6267\u884C\r\n    //\u89E6\u53D1\u66F4\u65B0\r\n    return Reflect.set(target, key, value, receiver);\r\n  },\r\n};\r\n", "import { isObject } from \"@vue/shared\";\r\nimport { mutableHandlers, ReactiveFlags } from \"./baseHandler\";\r\n\r\nconst reactiveMap = new WeakMap();\r\n\r\nfunction createReactiveObject(target) {\r\n  if (!isObject(target)) {\r\n    return target;\r\n  }\r\n\r\n  if (target[ReactiveFlags.IS_REACTIVE]) {\r\n    return target;\r\n  }\r\n\r\n  const exitsProxy = reactiveMap.get(target);\r\n  if (exitsProxy) {\r\n    return exitsProxy;\r\n  }\r\n\r\n  let proxy = new Proxy(target, mutableHandlers);\r\n\r\n  reactiveMap.set(target, proxy);\r\n\r\n  return proxy;\r\n}\r\n\r\nexport function reactive(target) {\r\n  return createReactiveObject(target);\r\n}\r\n"],
  "mappings": ";AAAO,SAAS,OAAO,IAAI,SAAU;AAEnC,QAAM,UAAU,IAAI,eAAe,IAAI,MAAM;AAC3C,YAAQ,IAAI;AAAA,EACd,CAAC;AAED,UAAQ,IAAI;AACd;AAEO,IAAI;AAEX,IAAM,iBAAN,MAAqB;AAAA;AAAA,EAEnB,YAAmB,IAAW,YAAY;AAAvB;AAAW;AAD9B,SAAO,SAAS;AAAA,EAC2B;AAAA,EAE3C,MAAM;AACJ,QAAI,CAAC,KAAK,QAAQ;AAChB,aAAO,KAAK,GAAG;AAAA,IACjB;AAEA,mBAAe;AACf,WAAO,KAAK;AAAA,EACd;AACF;;;ACvBO,SAAS,SAAS,OAAO;AAC9B,SAAO,OAAO,UAAU,YAAY,UAAU;AAChD;;;ACEO,IAAM,kBAAqC;AAAA,EAChD,IAAI,QAAQ,KAAK,UAAU;AACzB,QAAI,QAAQ,oCAA2B;AACrC,aAAO;AAAA,IACT;AAGA,WAAO,QAAQ,IAAI,QAAQ,KAAK,QAAQ;AAAA,EAC1C;AAAA,EACA,IAAI,QAAQ,KAAK,OAAO,UAAU;AAGhC,WAAO,QAAQ,IAAI,QAAQ,KAAK,OAAO,QAAQ;AAAA,EACjD;AACF;;;ACfA,IAAM,cAAc,oBAAI,QAAQ;AAEhC,SAAS,qBAAqB,QAAQ;AACpC,MAAI,CAAC,SAAS,MAAM,GAAG;AACrB,WAAO;AAAA,EACT;AAEA,MAAI,yCAAgC,GAAG;AACrC,WAAO;AAAA,EACT;AAEA,QAAM,aAAa,YAAY,IAAI,MAAM;AACzC,MAAI,YAAY;AACd,WAAO;AAAA,EACT;AAEA,MAAI,QAAQ,IAAI,MAAM,QAAQ,eAAe;AAE7C,cAAY,IAAI,QAAQ,KAAK;AAE7B,SAAO;AACT;AAEO,SAAS,SAAS,QAAQ;AAC/B,SAAO,qBAAqB,MAAM;AACpC;",
  "names": []
}
